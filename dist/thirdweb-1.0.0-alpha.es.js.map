{"version":3,"file":"thirdweb-1.0.0-alpha.es.js","sources":["../node_modules/jwt-decode/lib/atob.js","../node_modules/jwt-decode/lib/base64_url_decode.js","../node_modules/jwt-decode/lib/index.js","../node_modules/postmate/build/postmate.es.js","../src/thirdweb.ts"],"sourcesContent":["/**\n * The code was extracted from:\n * https://github.com/davidchambers/Base64.js\n */\n\nvar chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\nfunction InvalidCharacterError(message) {\n  this.message = message;\n}\n\nInvalidCharacterError.prototype = new Error();\nInvalidCharacterError.prototype.name = 'InvalidCharacterError';\n\nfunction polyfill (input) {\n  var str = String(input).replace(/=+$/, '');\n  if (str.length % 4 == 1) {\n    throw new InvalidCharacterError(\"'atob' failed: The string to be decoded is not correctly encoded.\");\n  }\n  for (\n    // initialize result and counters\n    var bc = 0, bs, buffer, idx = 0, output = '';\n    // get next character\n    buffer = str.charAt(idx++);\n    // character found in table? initialize bit storage and add its ascii value;\n    ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,\n      // and if not first of each 4 characters,\n      // convert the first 8 bits to one ascii character\n      bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0\n  ) {\n    // try to find character in table (0-63, not found => -1)\n    buffer = chars.indexOf(buffer);\n  }\n  return output;\n}\n\n\nmodule.exports = typeof window !== 'undefined' && window.atob && window.atob.bind(window) || polyfill;\n","var atob = require('./atob');\n\nfunction b64DecodeUnicode(str) {\n  return decodeURIComponent(atob(str).replace(/(.)/g, function (m, p) {\n    var code = p.charCodeAt(0).toString(16).toUpperCase();\n    if (code.length < 2) {\n      code = '0' + code;\n    }\n    return '%' + code;\n  }));\n}\n\nmodule.exports = function(str) {\n  var output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n  switch (output.length % 4) {\n    case 0:\n      break;\n    case 2:\n      output += \"==\";\n      break;\n    case 3:\n      output += \"=\";\n      break;\n    default:\n      throw \"Illegal base64url string!\";\n  }\n\n  try{\n    return b64DecodeUnicode(output);\n  } catch (err) {\n    return atob(output);\n  }\n};\n","'use strict';\n\nvar base64_url_decode = require('./base64_url_decode');\n\nfunction InvalidTokenError(message) {\n  this.message = message;\n}\n\nInvalidTokenError.prototype = new Error();\nInvalidTokenError.prototype.name = 'InvalidTokenError';\n\nmodule.exports = function (token,options) {\n  if (typeof token !== 'string') {\n    throw new InvalidTokenError('Invalid token specified');\n  }\n\n  options = options || {};\n  var pos = options.header === true ? 0 : 1;\n  try {\n    return JSON.parse(base64_url_decode(token.split('.')[pos]));\n  } catch (e) {\n    throw new InvalidTokenError('Invalid token specified: ' + e.message);\n  }\n};\n\nmodule.exports.InvalidTokenError = InvalidTokenError;\n","/**\n  postmate - A powerful, simple, promise-based postMessage library\n  @version v1.5.2\n  @link https://github.com/dollarshaveclub/postmate\n  @author Jacob Kelley <jakie8@gmail.com>\n  @license MIT\n**/\n/**\n * The type of messages our frames our sending\n * @type {String}\n */\nvar messageType = 'application/x-postmate-v1+json';\n/**\n * The maximum number of attempts to send a handshake request to the parent\n * @type {Number}\n */\n\nvar maxHandshakeRequests = 5;\n/**\n * A unique message ID that is used to ensure responses are sent to the correct requests\n * @type {Number}\n */\n\nvar _messageId = 0;\n/**\n * Increments and returns a message ID\n * @return {Number} A unique ID for a message\n */\n\nvar generateNewMessageId = function generateNewMessageId() {\n  return ++_messageId;\n};\n/**\n * Postmate logging function that enables/disables via config\n * @param  {Object} ...args Rest Arguments\n */\n\nvar log = function log() {\n  var _console;\n\n  return Postmate.debug ? (_console = console).log.apply(_console, arguments) : null;\n}; // eslint-disable-line no-console\n\n/**\n * Takes a URL and returns the origin\n * @param  {String} url The full URL being requested\n * @return {String}     The URLs origin\n */\n\nvar resolveOrigin = function resolveOrigin(url) {\n  var a = document.createElement('a');\n  a.href = url;\n  var protocol = a.protocol.length > 4 ? a.protocol : window.location.protocol;\n  var host = a.host.length ? a.port === '80' || a.port === '443' ? a.hostname : a.host : window.location.host;\n  return a.origin || protocol + \"//\" + host;\n};\nvar messageTypes = {\n  handshake: 1,\n  'handshake-reply': 1,\n  call: 1,\n  emit: 1,\n  reply: 1,\n  request: 1\n  /**\n   * Ensures that a message is safe to interpret\n   * @param  {Object} message The postmate message being sent\n   * @param  {String|Boolean} allowedOrigin The whitelisted origin or false to skip origin check\n   * @return {Boolean}\n   */\n\n};\nvar sanitize = function sanitize(message, allowedOrigin) {\n  if (typeof allowedOrigin === 'string' && message.origin !== allowedOrigin) return false;\n  if (!message.data) return false;\n  if (typeof message.data === 'object' && !('postmate' in message.data)) return false;\n  if (message.data.type !== messageType) return false;\n  if (!messageTypes[message.data.postmate]) return false;\n  return true;\n};\n/**\n * Takes a model, and searches for a value by the property\n * @param  {Object} model     The dictionary to search against\n * @param  {String} property  A path within a dictionary (i.e. 'window.location.href')\n * @param  {Object} data      Additional information from the get request that is\n *                            passed to functions in the child model\n * @return {Promise}\n */\n\nvar resolveValue = function resolveValue(model, property) {\n  var unwrappedContext = typeof model[property] === 'function' ? model[property]() : model[property];\n  return Postmate.Promise.resolve(unwrappedContext);\n};\n/**\n * Composes an API to be used by the parent\n * @param {Object} info Information on the consumer\n */\n\nvar ParentAPI =\n/*#__PURE__*/\nfunction () {\n  function ParentAPI(info) {\n    var _this = this;\n\n    this.parent = info.parent;\n    this.frame = info.frame;\n    this.child = info.child;\n    this.childOrigin = info.childOrigin;\n    this.events = {};\n\n    if (process.env.NODE_ENV !== 'production') {\n      log('Parent: Registering API');\n      log('Parent: Awaiting messages...');\n    }\n\n    this.listener = function (e) {\n      if (!sanitize(e, _this.childOrigin)) return false;\n      /**\n       * the assignments below ensures that e, data, and value are all defined\n       */\n\n      var _ref = ((e || {}).data || {}).value || {},\n          data = _ref.data,\n          name = _ref.name;\n\n      if (e.data.postmate === 'emit') {\n        if (process.env.NODE_ENV !== 'production') {\n          log(\"Parent: Received event emission: \" + name);\n        }\n\n        if (name in _this.events) {\n          _this.events[name].call(_this, data);\n        }\n      }\n    };\n\n    this.parent.addEventListener('message', this.listener, false);\n\n    if (process.env.NODE_ENV !== 'production') {\n      log('Parent: Awaiting event emissions from Child');\n    }\n  }\n\n  var _proto = ParentAPI.prototype;\n\n  _proto.get = function get(property) {\n    var _this2 = this;\n\n    return new Postmate.Promise(function (resolve) {\n      // Extract data from response and kill listeners\n      var uid = generateNewMessageId();\n\n      var transact = function transact(e) {\n        if (e.data.uid === uid && e.data.postmate === 'reply') {\n          _this2.parent.removeEventListener('message', transact, false);\n\n          resolve(e.data.value);\n        }\n      }; // Prepare for response from Child...\n\n\n      _this2.parent.addEventListener('message', transact, false); // Then ask child for information\n\n\n      _this2.child.postMessage({\n        postmate: 'request',\n        type: messageType,\n        property: property,\n        uid: uid\n      }, _this2.childOrigin);\n    });\n  };\n\n  _proto.call = function call(property, data) {\n    // Send information to the child\n    this.child.postMessage({\n      postmate: 'call',\n      type: messageType,\n      property: property,\n      data: data\n    }, this.childOrigin);\n  };\n\n  _proto.on = function on(eventName, callback) {\n    this.events[eventName] = callback;\n  };\n\n  _proto.destroy = function destroy() {\n    if (process.env.NODE_ENV !== 'production') {\n      log('Parent: Destroying Postmate instance');\n    }\n\n    window.removeEventListener('message', this.listener, false);\n    this.frame.parentNode.removeChild(this.frame);\n  };\n\n  return ParentAPI;\n}();\n/**\n * Composes an API to be used by the child\n * @param {Object} info Information on the consumer\n */\n\nvar ChildAPI =\n/*#__PURE__*/\nfunction () {\n  function ChildAPI(info) {\n    var _this3 = this;\n\n    this.model = info.model;\n    this.parent = info.parent;\n    this.parentOrigin = info.parentOrigin;\n    this.child = info.child;\n\n    if (process.env.NODE_ENV !== 'production') {\n      log('Child: Registering API');\n      log('Child: Awaiting messages...');\n    }\n\n    this.child.addEventListener('message', function (e) {\n      if (!sanitize(e, _this3.parentOrigin)) return;\n\n      if (process.env.NODE_ENV !== 'production') {\n        log('Child: Received request', e.data);\n      }\n\n      var _e$data = e.data,\n          property = _e$data.property,\n          uid = _e$data.uid,\n          data = _e$data.data;\n\n      if (e.data.postmate === 'call') {\n        if (property in _this3.model && typeof _this3.model[property] === 'function') {\n          _this3.model[property](data);\n        }\n\n        return;\n      } // Reply to Parent\n\n\n      resolveValue(_this3.model, property).then(function (value) {\n        return e.source.postMessage({\n          property: property,\n          postmate: 'reply',\n          type: messageType,\n          uid: uid,\n          value: value\n        }, e.origin);\n      });\n    });\n  }\n\n  var _proto2 = ChildAPI.prototype;\n\n  _proto2.emit = function emit(name, data) {\n    if (process.env.NODE_ENV !== 'production') {\n      log(\"Child: Emitting Event \\\"\" + name + \"\\\"\", data);\n    }\n\n    this.parent.postMessage({\n      postmate: 'emit',\n      type: messageType,\n      value: {\n        name: name,\n        data: data\n      }\n    }, this.parentOrigin);\n  };\n\n  return ChildAPI;\n}();\n/**\n  * The entry point of the Parent.\n * @type {Class}\n */\n\nvar Postmate =\n/*#__PURE__*/\nfunction () {\n  // eslint-disable-line no-undef\n  // Internet Explorer craps itself\n\n  /**\n   * Sets options related to the Parent\n   * @param {Object} object The element to inject the frame into, and the url\n   * @return {Promise}\n   */\n  function Postmate(_ref2) {\n    var _ref2$container = _ref2.container,\n        container = _ref2$container === void 0 ? typeof container !== 'undefined' ? container : document.body : _ref2$container,\n        model = _ref2.model,\n        url = _ref2.url,\n        name = _ref2.name,\n        _ref2$classListArray = _ref2.classListArray,\n        classListArray = _ref2$classListArray === void 0 ? [] : _ref2$classListArray;\n    // eslint-disable-line no-undef\n    this.parent = window;\n    this.frame = document.createElement('iframe');\n    this.frame.name = name || '';\n    this.frame.classList.add.apply(this.frame.classList, classListArray);\n    container.appendChild(this.frame);\n    this.child = this.frame.contentWindow || this.frame.contentDocument.parentWindow;\n    this.model = model || {};\n    return this.sendHandshake(url);\n  }\n  /**\n   * Begins the handshake strategy\n   * @param  {String} url The URL to send a handshake request to\n   * @return {Promise}     Promise that resolves when the handshake is complete\n   */\n\n\n  var _proto3 = Postmate.prototype;\n\n  _proto3.sendHandshake = function sendHandshake(url) {\n    var _this4 = this;\n\n    var childOrigin = resolveOrigin(url);\n    var attempt = 0;\n    var responseInterval;\n    return new Postmate.Promise(function (resolve, reject) {\n      var reply = function reply(e) {\n        if (!sanitize(e, childOrigin)) return false;\n\n        if (e.data.postmate === 'handshake-reply') {\n          clearInterval(responseInterval);\n\n          if (process.env.NODE_ENV !== 'production') {\n            log('Parent: Received handshake reply from Child');\n          }\n\n          _this4.parent.removeEventListener('message', reply, false);\n\n          _this4.childOrigin = e.origin;\n\n          if (process.env.NODE_ENV !== 'production') {\n            log('Parent: Saving Child origin', _this4.childOrigin);\n          }\n\n          return resolve(new ParentAPI(_this4));\n        } // Might need to remove since parent might be receiving different messages\n        // from different hosts\n\n\n        if (process.env.NODE_ENV !== 'production') {\n          log('Parent: Invalid handshake reply');\n        }\n\n        return reject('Failed handshake');\n      };\n\n      _this4.parent.addEventListener('message', reply, false);\n\n      var doSend = function doSend() {\n        attempt++;\n\n        if (process.env.NODE_ENV !== 'production') {\n          log(\"Parent: Sending handshake attempt \" + attempt, {\n            childOrigin: childOrigin\n          });\n        }\n\n        _this4.child.postMessage({\n          postmate: 'handshake',\n          type: messageType,\n          model: _this4.model\n        }, childOrigin);\n\n        if (attempt === maxHandshakeRequests) {\n          clearInterval(responseInterval);\n        }\n      };\n\n      var loaded = function loaded() {\n        doSend();\n        responseInterval = setInterval(doSend, 500);\n      };\n\n      if (_this4.frame.attachEvent) {\n        _this4.frame.attachEvent('onload', loaded);\n      } else {\n        _this4.frame.onload = loaded;\n      }\n\n      if (process.env.NODE_ENV !== 'production') {\n        log('Parent: Loading frame', {\n          url: url\n        });\n      }\n\n      _this4.frame.src = url;\n    });\n  };\n\n  return Postmate;\n}();\n/**\n * The entry point of the Child\n * @type {Class}\n */\n\n\nPostmate.debug = false;\n\nPostmate.Promise = function () {\n  try {\n    return window ? window.Promise : Promise;\n  } catch (e) {\n    return null;\n  }\n}();\n\nPostmate.Model =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Initializes the child, model, parent, and responds to the Parents handshake\n   * @param {Object} model Hash of values, functions, or promises\n   * @return {Promise}       The Promise that resolves when the handshake has been received\n   */\n  function Model(model) {\n    this.child = window;\n    this.model = model;\n    this.parent = this.child.parent;\n    return this.sendHandshakeReply();\n  }\n  /**\n   * Responds to a handshake initiated by the Parent\n   * @return {Promise} Resolves an object that exposes an API for the Child\n   */\n\n\n  var _proto4 = Model.prototype;\n\n  _proto4.sendHandshakeReply = function sendHandshakeReply() {\n    var _this5 = this;\n\n    return new Postmate.Promise(function (resolve, reject) {\n      var shake = function shake(e) {\n        if (!e.data.postmate) {\n          return;\n        }\n\n        if (e.data.postmate === 'handshake') {\n          if (process.env.NODE_ENV !== 'production') {\n            log('Child: Received handshake from Parent');\n          }\n\n          _this5.child.removeEventListener('message', shake, false);\n\n          if (process.env.NODE_ENV !== 'production') {\n            log('Child: Sending handshake reply to Parent');\n          }\n\n          e.source.postMessage({\n            postmate: 'handshake-reply',\n            type: messageType\n          }, e.origin);\n          _this5.parentOrigin = e.origin; // Extend model with the one provided by the parent\n\n          var defaults = e.data.model;\n\n          if (defaults) {\n            Object.keys(defaults).forEach(function (key) {\n              _this5.model[key] = defaults[key];\n            });\n\n            if (process.env.NODE_ENV !== 'production') {\n              log('Child: Inherited and extended model from Parent');\n            }\n          }\n\n          if (process.env.NODE_ENV !== 'production') {\n            log('Child: Saving Parent origin', _this5.parentOrigin);\n          }\n\n          return resolve(new ChildAPI(_this5));\n        }\n\n        return reject('Handshake Reply Failed');\n      };\n\n      _this5.child.addEventListener('message', shake, false);\n    });\n  };\n\n  return Model;\n}();\n\nexport default Postmate;\n","import jwt_decode from 'jwt-decode';\r\nimport Postmate from 'postmate';\r\n\r\nexport interface ThirdwebConfig {\r\n  connectUrl: string;\r\n}\r\n\r\nexport interface AutoPay {\r\n  authorizeAmount: number;\r\n  currency: string;\r\n}\r\n\r\nexport interface LoginRequest {\r\n  provider: string;\r\n}\r\n\r\nexport interface Position {\r\n  left: number;\r\n  top: number;\r\n}\r\n\r\nexport interface Size {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nexport interface TokenPayload {\r\n  iss: string;\r\n  aud: string;\r\n  iat: number;\r\n  exp: number;\r\n  autopay: AutoPay;\r\n}\r\n\r\nexport const DefaultThirdwebConfig: ThirdwebConfig = { connectUrl: 'https://connect.thirdweb.co/' };\r\n\r\nexport function initialize(config = DefaultThirdwebConfig): Thirdweb {\r\n  return new Thirdweb(config);\r\n}\r\n\r\nexport class Thirdweb {\r\n\r\n  private token: string | null = null;\r\n\r\n  private autopay: AutoPay | null = null;\r\n\r\n  private handshake: any;\r\n\r\n  constructor(private config = DefaultThirdwebConfig) {\r\n    this.processRedirectResult();\r\n    this.embedThirdweb();\r\n    this.loadToken();\r\n\r\n    if (this.token) {\r\n      this.handshake.then((child: any) => {\r\n        child.call('setClaimToken', this.token);\r\n      });\r\n    }\r\n  }\r\n\r\n  processRedirectResult() {\r\n    const match = window.location.hash.match(/#?&?thirdweb_token=([A-Za-z0-9-_=]+\\.[A-Za-z0-9-_=]+\\.?[A-Za-z0-9-_.+/=]*)$/);\r\n    if (match) {\r\n      localStorage.setItem('thirdweb_token', match[1]);\r\n      let url = window.location.href.substring(0, window.location.href.length - match[0].length);\r\n      window.location.replace(url);\r\n    }\r\n  }\r\n\r\n  embedThirdweb() {\r\n    this.handshake = new Postmate({\r\n      container: document.body,\r\n      url: this.config.connectUrl,\r\n      classListArray: ['thirdweb-frame'],\r\n    });\r\n\r\n    const frame = document.querySelector('.thirdweb-frame') as HTMLIFrameElement;\r\n    frame.style.border = 'none';\r\n    frame.style.backgroundColor = 'transparent';\r\n    frame.style.position = 'fixed';\r\n    frame.style.right = '0px';\r\n    frame.style.top = '40px';\r\n    frame.style.overflow = 'none';\r\n\r\n    this.handshake.then((child: any) => {\r\n      child.on('size-changed', (size: Size) => {\r\n        child.frame.style.width = `${size.width}px`;\r\n        child.frame.style.height = `${size.height}px`;\r\n      });\r\n\r\n      child.on('position-changed', (position: Position)  => {\r\n        child.frame.style.top = `${position.top}px`;\r\n      });\r\n\r\n      child.on('login', this.loginRequest.bind(this));\r\n\r\n      child.on('logout', this.logoutRequest.bind(this));\r\n    });\r\n  }\r\n\r\n  loginRequest(data: LoginRequest) {\r\n    if (['facebook', 'google'].includes(data.provider)) {\r\n      window.location.replace(`${this.config.connectUrl}auth.html#auth_type=${data.provider}&redirect_uri=${window.location.href}`);\r\n    }\r\n  }\r\n\r\n  logoutRequest() {\r\n    localStorage.removeItem('thirdweb_token');\r\n    window.location.replace(`${this.config.connectUrl}auth.html#auth_type=logout&redirect_uri=${window.location.href}`);\r\n  }\r\n\r\n  loadToken() {\r\n    const token = localStorage.getItem('thirdweb_token');\r\n    if (!token) {\r\n      return null;\r\n    }\r\n\r\n    const payload: TokenPayload = jwt_decode(token);\r\n    if (!this.validateToken(payload)) {\r\n      localStorage.removeItem('thirdweb_token');\r\n    }\r\n\r\n    this.token = token;\r\n    this.autopay = payload.autopay;\r\n  }\r\n\r\n  validateToken(payload: TokenPayload) {\r\n    if (payload.iss !== 'https://connect.thirdweb.co') {\r\n      return false;\r\n    }\r\n\r\n    // Taken from RFC 3986: https://tools.ietf.org/html/rfc3986#appendix-B\r\n    const match = window.location.href.match(/^(([^:/?#]+):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/);\r\n    const authority = match && match[4];\r\n    if (payload.aud !== authority) {\r\n      return false;\r\n    }\r\n\r\n    if (payload.iat >= Date.now() / 1000) {\r\n      return false;\r\n    }\r\n\r\n    if (payload.exp <= Date.now() / 1000) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n}"],"names":["jwt_decode"],"mappings":"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"}